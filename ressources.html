<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ressources ‚Äî Cours de Fran√ßais</title>
  <link rel="stylesheet" href="assets/styles.css">
  <style>
    .res-hero{padding:36px 0;border-bottom:1px solid rgba(148,163,184,.12);
      background:linear-gradient(90deg, rgba(91,156,255,.18), rgba(168,85,247,.18))}
    .res-hero h2{margin:0;color:#fff}
    .res-hero .small{color:#e5e7eb}

    .res-wrap{display:grid;gap:24px;align-items:start}
    @media(min-width:1280px){.res-wrap{grid-template-columns:280px 1fr 420px}}
    @media(min-width:980px) and (max-width:1279px){.res-wrap{grid-template-columns:260px 1fr}}

    .toc{position:sticky;top:80px}
    .card{background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));border:1px solid rgba(148,163,184,.15);border-radius:16px;padding:14px}
    .toc a{display:block;color:#cbd5e1;padding:6px 8px;border-radius:10px}
    .toc a:hover,.toc a.active{background:rgba(148,163,184,.1);color:#fff}

    .search{display:flex;gap:10px;align-items:center}
    .search input{width:100%;padding:12px;border:1px solid rgba(148,163,184,.25);border-radius:12px;background:rgba(255,255,255,.03);color:#fff}

    .accordion{display:grid;gap:12px}
    .acc{border:1px solid rgba(148,163,184,.2);border-radius:16px;background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02))}
    .acc-hd{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:14px 16px;cursor:pointer}
    .acc-hd h3{margin:0;font-size:18px;color:#fff;display:flex;align-items:center;gap:10px}
    .acc-hd .chev{transition:transform .2s ease}
    .acc.open .acc-hd .chev{transform:rotate(90deg)}
    .acc-bd{display:none;padding:0 14px 14px}
    .acc.open .acc-bd{display:block}

    .sub{border:1px dashed rgba(148,163,184,.25);border-radius:12px;padding:12px;margin:12px 0;background:rgba(255,255,255,.03)}
    .sub h4{margin:0 0 8px;font-size:16px;color:#e2e8f0;display:flex;align-items:center;gap:8px}
    .sub .items{display:grid;gap:10px}

    .fiche{border:1px solid rgba(148,163,184,.22);border-radius:12px;padding:12px;background:rgba(255,255,255,.02);display:grid;gap:6px}
    .fiche h5{margin:0;font-size:15px;color:#fff}
    .fiche .small{color:#94a3b8}
    .fiche .actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:4px}
    .btn-mini{display:inline-flex;align-items:center;gap:8px;padding:8px 10px;border-radius:10px;font-weight:700;border:1px solid rgba(148,163,184,.25);background:rgba(255,255,255,.03);color:#e2e8f0;cursor:pointer}
    .btn-mini:hover{filter:brightness(1.06)}
    .badge-k{display:inline-block;margin-left:8px;padding:3px 8px;border:1px solid rgba(148,163,184,.25);border-radius:999px;font-size:12px;color:#cbd5e1}

    .viewer-col{display:none}
    @media(min-width:1280px){.viewer-col{display:block; position:sticky; top:80px}}
    .viewer{background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));border:1px solid rgba(148,163,184,.15);border-radius:16px;box-shadow:0 8px 24px rgba(0,0,0,.22);padding:16px;height:max(60vh, 480px);overflow:auto}
    .viewer h4{margin:4px 0 8px}
    .viewer .meta{display:flex;flex-wrap:wrap;gap:8px;margin-bottom:8px}
    .viewer .meta .chip{font-size:12px;border:1px solid rgba(148,163,184,.25);border-radius:999px;padding:4px 8px;color:#cbd5e1}
    .viewer .ex{background:#0f172a;border:1px dashed rgba(148,163,184,.28);border-radius:10px;padding:10px;margin-top:8px}
    .viewer-empty{color:#94a3b8}

    .drawer{position:fixed;inset:0;display:none}
    .drawer.open{display:block}
    .drawer .backdrop{position:absolute;inset:0;background:rgba(0,0,0,.45)}
    .drawer .panel{position:absolute;inset:auto 0 0 0;background:#0f172a;border-top:1px solid rgba(148,163,184,.2);border-radius:18px 18px 0 0;max-height:85vh;overflow:auto;box-shadow:0 -8px 24px rgba(0,0,0,.35);padding:14px}
    .drawer .close{position:sticky;top:0;display:flex;justify-content:flex-end}
    .drawer .close button{margin:-6px -6px 6px 0}
    .focus-ring:focus{outline:2px solid rgba(91,156,255,.6);outline-offset:2px;border-radius:10px}
  </style>
</head>
<body>
<header>
  <nav class="container">
    <div class="brand">
      <svg class="flag" viewBox="0 0 3 2" aria-hidden="true"><rect width="1" height="2" x="0" fill="#002395"/><rect width="1" height="2" x="1" fill="#ffffff"/><rect width="1" height="2" x="2" fill="#ED2939"/></svg>
      <h1>Cours de Fran√ßais ‚Äî Domingas Silva</h1>
    </div>
    <button class="burger" aria-label="Ouvrir le menu" aria-expanded="false" aria-controls="navlinks">‚ò∞</button>
    <div class="navlinks" id="navlinks">
      <a href="index.html">Accueil</a>
      <a href="apropos.html">√Ä propos</a>
      <a href="cours.html">Cours</a>
      <a class="active" href="ressources.html">Ressources</a>
      <a href="test-niveau.html">Test de niveau</a>
      <a href="contact.html">Contact</a>
      <a class="btn btn-primary" href="contact.html#inscription">S‚Äôinscrire</a>
    </div>
  </nav>
</header>

<main class="res-hero">
  <div class="container">
    <h2>Ressources de cours</h2>
    <p class="small">Ouvrez les fiches dans le volet de lecture, ou cliquez <strong>PDF ‚§¥Ô∏é</strong> pour la version imprimable.</p>
  </div>
</main>

<section class="container res-wrap">
  <aside class="toc">
    <div class="card">
      <strong>Sommaire</strong>
      <div id="toc-links" style="margin-top:10px"></div>
    </div>
    <div class="card" style="margin-top:12px">
      <div class="search">
        <input id="search" type="search" placeholder="Rechercher (ex : imparfait, adjectifs, pays‚Ä¶)">
      </div>
      <div class="small" style="margin-top:6px;color:#94a3b8">Filtre les sections et fiches.</div>
    </div>
  </aside>

  <div>
    <div id="acc-container" class="accordion"></div>
  </div>

  <aside class="viewer-col">
    <div class="viewer" id="viewer">
      <div class="viewer-empty">S√©lectionnez une fiche dans la liste √† gauche.</div>
    </div>
  </aside>
</section>

<div class="drawer" id="drawer" aria-hidden="true">
  <div class="backdrop" data-dismiss></div>
  <div class="panel">
    <div class="close"><button class="btn-mini" data-dismiss>Fermer ‚úñ</button></div>
    <div id="drawer-content"></div>
  </div>
</div>

<footer>
  <div class="container footer-inner">
    <div class="small">¬© <span id="year"></span> Domingas Silva ‚Äî Ressources p√©dagogiques.</div>
  </div>
</footer>

<script>
  /* === Pictos MINIMAUX : 1 par grande section seulement === */
  const ICONS = {
    grammaire:'üìò',
    vocabulaire:'üóÇÔ∏è',
    comprehension:'üìñ',
    atelier:'‚úçÔ∏è'
  };

  /* ====== DATA (sans pictos sur groupes/items/fiches) ====== */
  const DATA = [
    {
      id:'grammaire', title:`${ICONS.grammaire} Grammaire`,
      groups: [
        { title:`Temps de l‚Äôindicatif`, items:[
          { title:`Pr√©sent`, fiches:[
            { title:'Valeurs & formation',
              pdf: 'assets/pdfs/present-valeurs-formation.pdf',
              html:`<p>Le <strong>pr√©sent de l‚Äôindicatif</strong> exprime une action en cours, une v√©rit√© g√©n√©rale ou un futur proche.</p>
                    <ul class="small"><li>-ER : je parle, nous parlons‚Ä¶</li><li>-IR : je finis, nous finissons‚Ä¶</li><li>-RE : je vends, nous vendons‚Ä¶</li></ul>
                    <div class="ex"><strong>Exercice</strong> : ¬´ nous (visiter) ¬ª, ¬´ ils (choisir) ¬ª. <details><summary>Correction</summary><div>nous visitons ; ils choisissent</div></details></div>`},
            { title:'Pr√©sent vs futur proche',
              pdf: 'assets/pdfs/present-vs-futur-proche.pdf',
              html:`<p><em>aller + infinitif</em> : futur proche (imminent).</p>
                    <div class="ex"><strong>Transformez</strong> : ¬´ Je d√Æne. ¬ª ‚Üí Je <strong>vais d√Æner</strong>.</div>`}
          ]},
          { title:`Pass√© compos√©`, fiches:[
            { title:'Formation AVOIR/√äTRE + participe',
              pdf: 'assets/pdfs/passe-compose-formation.pdf',
              html:`<p><em>auxiliaire</em> + <em>participe pass√©</em>. Accord avec <strong>√™tre</strong> (sujet) ; avec <strong>avoir</strong> si COD <em>avant</em>.</p>`},
            { title:'Valeurs & emploi',
              pdf: 'assets/pdfs/passe-compose-valeurs.pdf',
              html:`<p>Action achev√©e, dat√©e : ¬´ Hier, j‚Äôai fini‚Ä¶ ¬ª</p>`}
          ]},
          { title:`Imparfait / Pass√© compos√©`, fiches:[
            { title:'Contraste narratif',
              pdf: 'assets/pdfs/imparfait-vs-pc.pdf',
              html:`<p><strong>Imparfait</strong> = d√©cor/habitude ; <strong>PC</strong> = actions.</p>`}
          ]},
          { title:`Futurs`, fiches:[
            { title:'Futur simple ‚Äî terminaisons',
              pdf: 'assets/pdfs/futur-simple-terminaisons.pdf',
              html:`<p>parlerai, finiras, verra‚Ä¶</p>`},
            { title:'Futur ant√©rieur ‚Äî valeurs',
              pdf: 'assets/pdfs/futur-anterieur.pdf',
              html:`<p>¬´ Quand tu arriveras, j‚Äô<strong>aurai fini</strong>. ¬ª</p>`}
          ]},
          { title:`Conditionnel`, fiches:[
            { title:'Politesse & hypoth√®se',
              pdf: 'assets/pdfs/conditionnel-politesse.pdf',
              html:`<p><em>Je voudrais</em>‚Ä¶</p>`}
          ]},
          { title:`Verbes irr√©guliers`, fiches:[
            { title:'√ätre / Avoir / Aller / Faire',
              pdf: 'assets/pdfs/irreguliers-eaaf.pdf',
              html:`<ul class="small"><li>√™tre : je suis‚Ä¶</li><li>avoir : j‚Äôai‚Ä¶</li><li>aller : je vais‚Ä¶</li><li>faire : je fais‚Ä¶</li></ul>`}
          ]}
        ]},
        { title:`Verbes (outil)`, items:[
          { title:`Conjugueur`, fiches:[
            { title:'Chercher un verbe',
              pdf: null,
              html:`<p class="small">Astuce : ¬´ verbe + conjugaison ¬ª (module interne √† venir).</p>`}
          ]}
        ]},
        { title:`Noms & groupes nominaux`, items:[
          { title:`Articles`, fiches:[
            { title:'D√©fini / ind√©fini / partitif',
              pdf: 'assets/pdfs/articles-definis-indefinis-partitifs.pdf',
              html:`<p><strong>le/la/les</strong> ; <strong>un/une/des</strong> ; <strong>du/de la/de l‚Äô/des</strong>.</p>`}
          ]},
          { title:`D√©terminants & pronoms`, fiches:[
            { title:'Possessifs / d√©monstratifs / relatifs',
              pdf: 'assets/pdfs/pronoms-determinants.pdf',
              html:`<p>mon/ma/mes ; ce/cet/cette/ces ; qui/que/o√π/dont.</p>`}
          ]},
          { title:`Adjectifs`, fiches:[
            { title:'Accords & place',
              pdf: 'assets/pdfs/adjectifs-accords-place.pdf',
              html:`<p>Accord genre/nombre. Parfois avant : beau, grand‚Ä¶</p>`}
          ]},
          { title:`Adverbes`, fiches:[
            { title:'Formation en -ment',
              pdf: 'assets/pdfs/adverbes-formation.pdf',
              html:`<p>heureux ‚Üí heureusement</p>`}
          ]},
          { title:`Pr√©positions`, fiches:[
            { title:'√Ä / De / En / Dans',
              pdf: 'assets/pdfs/prepositions-a-de-en-dans.pdf',
              html:`<p>en France ; au Br√©sil ; aux √âtats-Unis‚Ä¶</p>`}
          ]},
          { title:`Structure de la phrase`, fiches:[
            { title:'SVO / n√©gation / interrogation',
              pdf: 'assets/pdfs/structure-phrase.pdf',
              html:`<p>SVO ; ne‚Ä¶ pas ; Est-ce que‚Ä¶</p>`}
          ]}
        ]}
      ]
    },
    {
      id:'vocabulaire', title:`${ICONS.vocabulaire} Vocabulaire`,
      groups: [
        { title:`Mots √† ne pas confondre`, items:[
          { title:'Homophones', fiches:[
            { title:'a/√† ; ou/o√π ; ces/ses',
              pdf: 'assets/pdfs/homophones.pdf',
              html:`<p>a/√† ; ou/o√π ; ces/ses.</p>`}
          ]}
        ]},
        { title:`Conjonctions`, items:[
          { title:'Coordination / subordination', fiches:[
            { title:'mais, ou, et‚Ä¶ / parce que, lorsque‚Ä¶',
              pdf: 'assets/pdfs/conjonctions.pdf',
              html:`<p>Relier deux propositions : parce que, lorsque‚Ä¶</p>`}
          ]}
        ]},
        { title:`Nombres, date et heure`, items:[
          { title:'Chiffres & dates', fiches:[
            { title:'Heure & formats',
              pdf: 'assets/pdfs/heures-dates.pdf',
              html:`<p>Il est 7h30 ; le 15/09/2025‚Ä¶</p>`}
          ]}
        ]},
        { title:`Pays et gentil√©s`, items:[
          { title:'Cartes & listes', fiches:[
            { title:'Nationalit√©s',
              pdf: 'assets/pdfs/nationalites.pdf',
              html:`<p>France ‚Üí fran√ßais(e) ; Br√©sil ‚Üí br√©silien(ne)‚Ä¶</p>`}
          ]}
        ]},
        { title:`Expressions`, items:[
          { title:'Idiomes courants', fiches:[
            { title:'Avoir besoin de / √™tre en retard‚Ä¶',
              pdf: 'assets/pdfs/expressions-courantes.pdf',
              html:`<p>J‚Äôai besoin de‚Ä¶ ; Je suis en retard ; √áa marche !</p>`}
          ]}
        ]},
        { title:`Vocabulaire th√©matique`, items:[
          { title:'Vie quotidienne', fiches:[
            { title:'Alimentation / Sant√© / Transports',
              pdf: 'assets/pdfs/vocab-vie-quotidienne.pdf',
              html:`<ul class="small"><li>Alimentation : march√©, cuisiner‚Ä¶</li><li>Sant√© : ordonnance‚Ä¶</li><li>Transports : billet, correspondance</li></ul>`}
          ]}
        ]}
      ]
    },
    {
      id:'comprehension', title:`${ICONS.comprehension} Compr√©hension`,
      groups: [
        { title:`Compr√©hension √©crite`, items:[
          { title:'Textes gradu√©s', fiches:[
            { title:'A1‚ÄìA2 : Annonce simple',
              pdf: 'assets/pdfs/ce-annonce-a1a2.pdf',
              html:`<p><em>Texte</em> : ¬´ La m√©diath√®que est ouverte du mardi au samedi. ¬ª</p>`}
          ]}
        ]},
        { title:`Compr√©hension orale`, items:[
          { title:'Audio & vid√©o', fiches:[
            { title:'Dialogues du quotidien',
              pdf: 'assets/pdfs/co-dialogues.pdf',
              html:`<p class="small">√âcoute guid√©e ¬´ √Ä la boulangerie ¬ª (intentions, prix, politesse).</p>`}
          ]}
        ]}
      ]
    },
    {
      id:'atelier', title:`${ICONS.atelier} Atelier d‚Äô√©criture`,
      groups: [
        { title:`La ponctuation`, items:[
          { title:'Signes & usages', fiches:[
            { title:', ; : ‚Ä¶ ! ?',
              pdf: 'assets/pdfs/ponctuation.pdf',
              html:`<p>¬´ ; ¬ª s√©pare deux phrases proches ; ¬´ : ¬ª introduit ; ¬´ ‚Ä¶ ¬ª cr√©e une attente.</p>`}
          ]}
        ]},
        { title:`Figures de style`, items:[
          { title:'Fr√©quentes', fiches:[
            { title:'Comparaison / m√©taphore / hyperbole',
              pdf: 'assets/pdfs/figures-style.pdf',
              html:`<p>clair comme l‚Äôeau (comparaison), oc√©an de papiers (hyperbole)‚Ä¶</p>`}
          ]}
        ]},
        { title:`Point de vue narratif`, items:[
          { title:'Focalisations', fiches:[
            { title:'Interne / externe / omniscient',
              pdf: 'assets/pdfs/point-de-vue.pdf',
              html:`<p>Interne = pens√©es du perso ; Externe = cam√©ra ; Omniscient = tout savoir.</p>`}
          ]}
        ]},
        { title:`Registres de langue`, items:[
          { title:'Soutenu / courant / familier', fiches:[
            { title:'Adapter au contexte',
              pdf: 'assets/pdfs/registres-langue.pdf',
              html:`<p>Je vous prie de / Merci de / Tu peux‚Ä¶</p>`}
          ]}
        ]},
        { title:`D√©crire une image`, items:[
          { title:'M√©thode pas √† pas', fiches:[
            { title:'Observer ‚Üí nommer ‚Üí relier',
              pdf: 'assets/pdfs/decrire-une-image.pdf',
              html:`<p>1) Qui/quoi/o√π ? 2) D√©tails 3) Hypoth√®ses.</p>`}
          ]}
        ]}
      ]
    }
  ];

  // ---------- Rendu / interactions ----------
  const accRoot   = document.getElementById('acc-container');
  const tocRoot   = document.getElementById('toc-links');
  const searchEl  = document.getElementById('search');
  const viewerCol = document.querySelector('.viewer-col');
  const viewer    = document.getElementById('viewer');
  const drawer    = document.getElementById('drawer');
  const drawerCt  = document.getElementById('drawer-content');

  tocRoot.innerHTML = DATA.map(s=>`<a href="#${s.id}" data-id="${s.id}">${s.title}</a>`).join('');

  function render(filter=''){
    const q=(filter||'').trim().toLowerCase();
    accRoot.innerHTML = DATA.map((section, sIdx)=>{
      const groupsHTML = (section.groups||[]).map((g, gIdx)=>{
        const itemsHTML = (g.items||[]).map((it, iIdx)=>{
          const fiches = (it.fiches||[]).map((f, fIdx)=>{
            const matches = !q || f.title.toLowerCase().includes(q) || (f.html && f.html.toLowerCase().includes(q)) || it.title.toLowerCase().includes(q);
            if(!matches) return '';
            const fid = encodeURIComponent(`${sIdx}|${gIdx}|${iIdx}|${fIdx}`);
            const pdfBtn = f.pdf ? `<a class="btn-mini" href="${f.pdf}" target="_blank" rel="noopener">PDF ‚§¥Ô∏é</a>` : '';
            return `<div class="fiche">
                      <h5>${f.title}</h5>
                      <div class="small">${it.title} ‚Äî ${g.title}</div>
                      <div class="actions">
                        <button class="btn-mini focus-ring" data-open="${fid}" aria-label="Ouvrir ${f.title}">Ouvrir dans le volet ‚Üí</button>
                        ${pdfBtn}
                      </div>
                    </div>`;
          }).join('');
          if(!fiches) return '';
          return `<div class="sub">
            <h4>${it.title}</h4>
            <div class="items">${fiches}</div>
          </div>`;
        }).join('');
        if(!itemsHTML.trim()) return '';
        return `<div class="card" style="padding:12px">${itemsHTML}</div>`;
      }).join('');
      if(!groupsHTML.trim()) return '';
      return `<div class="acc" id="${section.id}">
        <div class="acc-hd" role="button" aria-expanded="false">
          <h3>${section.title}</h3>
          <span class="badge-k">${(section.groups||[]).length} groupes</span>
          <span class="chev">‚ñ∂</span>
        </div>
        <div class="acc-bd">${groupsHTML}</div>
      </div>`;
    }).join('');

    attachHandlers();
  }

  function attachHandlers(){
    // Accordions
    accRoot.querySelectorAll('.acc').forEach(acc=>{
      const hd = acc.querySelector('.acc-hd');
      hd.addEventListener('click', ()=>{
        acc.classList.toggle('open');
        const open = acc.classList.contains('open');
        hd.setAttribute('aria-expanded', open?'true':'false');
      });
    });
    // Open fiche in viewer/drawer
    accRoot.querySelectorAll('[data-open]').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const fid = btn.getAttribute('data-open');
        openFicheById(fid);
      });
    });
  }

  function parseFid(fid){
    const [s,g,i,f] = decodeURIComponent(fid).split('|').map(n=>parseInt(n,10));
    const section = DATA[s]; if(!section) return null;
    const group   = section.groups?.[g]; if(!group) return null;
    const item    = group.items?.[i]; if(!item) return null;
    const fiche   = item.fiches?.[f]; if(!fiche) return null;
    return {section, group, item, fiche};
  }

  function openFicheById(fid){
    const p = parseFid(fid); if(!p) return;
    const html = `
      <div class="meta">
        <span class="chip">${p.section.title}</span>
        <span class="chip">${p.group.title}</span>
        <span class="chip">${p.item.title}</span>
      </div>
      <h4>${p.fiche.title}</h4>
      <div>${p.fiche.html}</div>`;
    if (window.matchMedia('(min-width: 1280px)').matches) {
      viewerCol.style.display='block';
      viewer.innerHTML = html; viewer.scrollTop=0;
    } else {
      drawerCt.innerHTML = html;
      drawer.classList.add('open'); drawer.setAttribute('aria-hidden','false');
    }
  }

  // Drawer close
  drawer.addEventListener('click', (e)=>{ if(e.target.hasAttribute('data-dismiss')){ drawer.classList.remove('open'); drawer.setAttribute('aria-hidden','true'); } });
  window.addEventListener('keydown', (e)=>{ if(e.key==='Escape'){ drawer.classList.remove('open'); drawer.setAttribute('aria-hidden','true'); } });

  // Search
  searchEl.addEventListener('input', e=>render(e.target.value));

  document.getElementById('year').textContent = new Date().getFullYear();
  render();
</script>
<script src="assets/script.js" defer></script>
</body>
</html>
